<!doctype html>
<html lang="en-US">
<head>

<!-- THIS DOC IS A THIRD ATTEMPT AT CREATING THE CALENDAR, MORE SPECIFICALLY TAILORED TO OUR WEEKLY SCHEDULE -->

<div class="container">
 <header> <a href="">
   <h4 class="logo">Calendar View</h4>
   </a>
 </header>
</div>
<script>

var startDate = new Date('2018-12-04T00:00:00'); // a date
var endDate = new Date('2018-12-12T23:00:00'); // a date
var timeSlotSizeString = "60"; //10, 15, 20, 30, 60
var timeSlotSize = parseInt(timeSlotSizeString);
var startTime = startDate.getHours(); // a time
var endTime = endDate.getHours(); // a time



// the variables that are gotten from those initial data values
var startDayOfWeek = startDate.getDay();
var endDayOfWeek = endDate.getDay();
var timeSlotAmount = 60 / window.timeSlotSize * (window.endTime - window.startTime);

//Sets up the unfinished weeks that will be created in the calendar by setting the first Monday and final Friday
var mondayOfStartWeek = startDate
var fridayOfEndWeek = endDate
mondayOfStartWeek.setDate(mondayOfStartWeek.getDate());
fridayOfEndWeek.setDate(fridayOfEndWeek.getDate());

for (var i=startDayOfWeek; i>1; i--){
	mondayOfStartWeek.setDate(mondayOfStartWeek.getDate() - 1);
}

for (var i=endDayOfWeek; i<5; i++){
	fridayOfEndWeek.setDate(fridayOfEndWeek.getDate() + 1);
}
console.log(mondayOfStartWeek);
console.log(fridayOfEndWeek);


//Set the live variables to build the calendar view
var currentMonth = mondayOfStartWeek.getMonth();
var currentyear = mondayOfStartWeek.getYear();
var buildScheduleYear = window.mondayOfStartWeek.getYear();
var buildScheduleMonth = window.mondayOfStartWeek.getMonth();
var buildScheduleDay = window.mondayOfStartWeek.getDate();
var buildScheduleDayOfWeek = window.mondayOfStartWeek.getDay();
var buildScheduleHour = window.startDate.getHours();



//Build the calendar
function buildCalendar(){
	var html='table'
	buildScheduleDay = window.buildScheduleDayOfWeek
	for (var j=1; j <= 5; j ++){
		for (var i=window.buildScheduleHour, d=1; i<window.endDate.getHours(); i+= timeSlotSize/60){
			document.write("this is the " + d + "th meeting on the "+ j + "th day" + "<br>");
			d++;
		}
	}
}
buildCalendar()



function nextWeek(modayOfCurrentWeek){
	return mondayOfCurrentWeek.setDate(modayOfCurrentWeek.getDate + 7);
}
function prevWeek(modayOfCurrentWeek){
	return mondayOfCurrentWeek.setDate(modayOfCurrentWeek.getDate - 7);
}




TableColumns = ['TIMESLOT','MON','TUE','WED','THU','FRI'];

Months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec' ];


console.log(timeSlotAmount);

function nextWeek(currentWeek){

}

function prevWeek(currentWeek){

}

function processResponseCalendar(result) {
  // Can grab any DIV or SPAN HTML element and can then manipulate its
  // contents dynamically via javascript
  console.log("result:" + result);
  var js = JSON.parse(result);
  var respString = js["response"];
  var id = js["id"];             // change to get the information that you need
  var code = js["secretCode"];   // change to get the information that you need
   // Update computation result
  document.getElementById("secretCodeOrganizer").value = code;
  document.getElementById("scheduleIdOrganizer").value = id;
  window.alert(respString);
}

xhr.onloadend = function () {
    console.log(xhr);
    console.log(xhr.request);
    if (xhr.readyState == XMLHttpRequest.DONE) {
      console.log ("XHR:" + xhr.responseText);
      processResponseCalendar(xhr.responseText);
    } else {
      window.alert("Oops, something went wrong!");
    }
  };

</script>

<div id="Calendar"></div>
Your Secret Code for this Schedule is: <input id="secretCodeOrganizer" readonly/>
and the ID to schedule Meetings is: <input id="scheduleIdOrganizer" readonly/>
